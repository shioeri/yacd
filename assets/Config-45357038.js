import{r as N,R as d,P as p,j as t,s as D,e as S,c as te,h as ne,i as M,k as A,l as re,b as F,n as se,g as W,o as oe,q as ae,t as k,v as le,w as ie,x as ce,y as de,z as ue,u as pe,A as he,C as me,B as y,D as fe,E as ge,F as xe,G as ve}from"./index-ce8b21b5.js";import{r as je}from"./logs-9df51588.js";import{S as w,T as B}from"./Select-14c3db72.js";import{R as ye}from"./rotate-cw-52f5d800.js";function C(){return C=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},C.apply(this,arguments)}function be(e,o){if(e==null)return{};var s=ke(e,o),r,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(o.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ke(e,o){if(e==null)return{};var s={},r=Object.keys(e),n,a;for(a=0;a<r.length;a++)n=r[a],!(o.indexOf(n)>=0)&&(s[n]=e[n]);return s}var E=N.forwardRef(function(e,o){var s=e.color,r=s===void 0?"currentColor":s,n=e.size,a=n===void 0?24:n,c=be(e,["color","size"]);return d.createElement("svg",C({ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("polyline",{points:"8 17 12 21 16 17"}),d.createElement("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),d.createElement("path",{d:"M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"}))});E.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};E.displayName="DownloadCloud";const we=E;function O(){return O=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},O.apply(this,arguments)}function _e(e,o){if(e==null)return{};var s=Ce(e,o),r,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(o.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ce(e,o){if(e==null)return{};var s={},r=Object.keys(e),n,a;for(a=0;a<r.length;a++)n=r[a],!(o.indexOf(n)>=0)&&(s[n]=e[n]);return s}var I=N.forwardRef(function(e,o){var s=e.color,r=s===void 0?"currentColor":s,n=e.size,a=n===void 0?24:n,c=_e(e,["color","size"]);return d.createElement("svg",O({ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),d.createElement("polyline",{points:"16 17 21 12 16 7"}),d.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});I.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};I.displayName="LogOut";const Oe=I;function P(){return P=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},P.apply(this,arguments)}function Pe(e,o){if(e==null)return{};var s=Ne(e,o),r,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(o.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ne(e,o){if(e==null)return{};var s={},r=Object.keys(e),n,a;for(a=0;a<r.length;a++)n=r[a],!(o.indexOf(n)>=0)&&(s[n]=e[n]);return s}var $=N.forwardRef(function(e,o){var s=e.color,r=s===void 0?"currentColor":s,n=e.size,a=n===void 0?24:n,c=Pe(e,["color","size"]);return d.createElement("svg",P({ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),d.createElement("polyline",{points:"3 6 5 6 21 6"}),d.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),d.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),d.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});$.propTypes={color:p.string,size:p.oneOfType([p.string,p.number])};$.displayName="Trash2";const Se=$,{useState:Ee,useRef:Ie,useEffect:$e,useCallback:Le}=S;function ze(e){return t.jsx("input",{className:D.input,...e})}function Te({value:e,...o}){const[s,r]=Ee(e),n=Ie(e);$e(()=>{n.current!==e&&r(e),n.current=e},[e]);const a=Le(c=>r(c.target.value),[r]);return t.jsx("input",{className:D.input,value:s,onChange:a,...o})}const Re="_root_8xen9_1",Me="_section_8xen9_2",Ae="_item_8xen9_15",Be="_sep_8xen9_35",De="_label_8xen9_48",i={root:Re,section:Me,item:Ae,sep:Be,label:De},Fe="_fieldset_1ghjp_1",We="_input_1ghjp_9",Ve="_cnt_1ghjp_9",_={fieldset:Fe,input:We,cnt:Ve};function Ue({OptionComponent:e,optionPropsList:o,selectedIndex:s,onChange:r}){const n=te("visually-hidden",_.input),a=c=>{r(c.target.value)};return t.jsx("fieldset",{className:_.fieldset,children:o.map((c,g)=>t.jsxs("label",{children:[t.jsx("input",{type:"radio",checked:s===g,name:"selection",value:g,"aria-labelledby":"traffic chart type "+g,onChange:a,className:n}),t.jsx("div",{className:_.cnt,children:t.jsx(e,{...c})})]},g))})}const{useMemo:Ge}=S,He={plugins:{legend:{display:!1}},scales:{x:{display:!1,type:"category"},y:{display:!1,type:"linear"}}},V=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],qe=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],Je=V;function Ke({id:e}){const o=ne.read(),s=Ge(()=>({labels:Je,datasets:[{...M,...A[e].up,data:V},{...M,...A[e].down,data:qe}]}),[e]),r="chart-"+e;return re(o.Chart,r,s,null,He),t.jsx("div",{style:{width:100,padding:5},children:t.jsx("canvas",{id:r})})}const{useEffect:U,useState:Qe,useCallback:f,useRef:Xe,useMemo:Ye}=S,Ze=[{id:0},{id:1},{id:2},{id:3}],et=[["debug","Debug"],["info","Info"],["warning","Warning"],["error","Error"],["silent","Silent"]],tt=[{key:"port",label:"HTTP Proxy Port"},{key:"socks-port",label:"SOCKS5 Proxy Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"},{key:"tproxy-port",label:"tProxy Port"}],nt=[["zh","中文"],["en","English"]],rt=[["Global","Global"],["Rule","Rule"],["Direct","Direct"]],st=e=>({configs:se(e),apiConfig:W(e)}),ot=e=>({selectedChartStyleIndex:xe(e),latencyTestUrl:ve(e),apiConfig:W(e)}),at=F(ot)(ct),mt=F(st)(lt);function lt({dispatch:e,configs:o,apiConfig:s}){return U(()=>{e(oe(s))},[e,s]),t.jsx(at,{configs:o})}function it(e){return e&&e.meta&&!e.premium?"Clash.Meta ":e&&e.meta&&e.premium?"sing-box ":"Clash Premium"}function ct({dispatch:e,configs:o,selectedChartStyleIndex:s,latencyTestUrl:r,apiConfig:n}){const[a,c]=Qe(o),g=Xe(o);U(()=>{g.current!==o&&c(o),g.current=o},[o]);const G=f(()=>{e(ae("apiConfig"))},[e]),x=f((l,u)=>{c({...a,[l]:u})},[a]),H=f(l=>{const u="allow-lan",m=l;x(u,m),e(k(n,{"allow-lan":m}))},[n,e,x]),j=f(({name:l,value:u})=>{switch(l){case"mode":case"log-level":x(l,u),e(k(n,{[l]:u})),l==="log-level"&&je({...n,logLevel:u});break;case"tproxy-port":case"redir-port":case"socks-port":case"mixed-port":case"port":if(u!==""){const m=parseInt(u,10);if(m<0||m>65535)return}x(l,u);break;default:return}},[n,e,x]),q=f(l=>j(l.target),[j]),{selectChartStyleIndex:J,updateAppConfig:L}=le(),z=f(l=>{const u=l.target,{name:m,value:R}=u;switch(m){case"port":case"socks-port":case"mixed-port":case"redir-port":case"tproxy-port":{const b=parseInt(R,10);if(b<0||b>65535)return;e(k(n,{[m]:b}));break}case"latencyTestUrl":{L(m,R);break}default:throw new Error(`unknown input name ${m}`)}},[n,e,L]),K=f(()=>{e(ie(n))},[n,e]),Q=f(()=>{e(ce(n))},[n,e]);f(()=>{e(upgradeCore(n))},[n,e]);const X=f(()=>{e(de(n))},[n,e]),Y=Ye(()=>{const l=a.mode;return typeof l=="string"&&l[0].toUpperCase()+l.slice(1)},[a.mode]),[Z,ee]=ue(fe),{t:h,i18n:T}=pe(),{data:v}=he(["/version",n],()=>ge("/version",n));return t.jsxs("div",{children:[t.jsx(me,{title:h("Config")}),t.jsxs("div",{className:i.root,children:[v.meta&&v.premium||tt.map(l=>a[l.key]!==void 0?t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:l.label}),t.jsx(ze,{name:l.key,value:a[l.key],onChange:q,onBlur:z})]},l.key):null),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Mode"}),t.jsx(w,{options:rt,selected:Y,onChange:l=>j({name:"mode",value:l.target.value})})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Log Level"}),t.jsx(w,{options:et,selected:a["log-level"],onChange:l=>j({name:"log-level",value:l.target.value})})]}),v.meta&&v.premium||t.jsx("div",{children:t.jsxs("div",{className:i.item,children:[t.jsx(B,{id:"config-allow-lan",checked:a["allow-lan"],onChange:H}),t.jsx("label",{htmlFor:"config-allow-lan",children:"Allow LAN"})]})})]}),t.jsx("div",{className:i.sep,children:t.jsx("div",{})}),t.jsxs("div",{className:i.section,children:[t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"Reload"}),t.jsx(y,{start:t.jsx(ye,{size:16}),label:h("reload_config_file"),onClick:K})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"FakeIP"}),t.jsx(y,{start:t.jsx(Se,{size:16}),label:h("flush_fake_ip_pool"),onClick:Q})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:"GEO Databases"}),t.jsx(y,{start:t.jsx(we,{size:16}),label:h("update_geo_databases_file"),onClick:X})]})]}),t.jsx("div",{className:i.sep,children:t.jsx("div",{})}),t.jsxs("div",{className:i.section,children:[t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:h("latency_test_url")}),t.jsx(Te,{name:"latencyTestUrl",type:"text",value:r,onBlur:z})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:h("lang")}),t.jsx("div",{children:t.jsx(w,{options:nt,selected:T.language,onChange:l=>T.changeLanguage(l.target.value)})})]}),t.jsxs("div",{children:[t.jsx("div",{className:i.label,children:h("chart_style")}),t.jsx(Ue,{OptionComponent:Ke,optionPropsList:Ze,selectedIndex:s,onChange:J})]}),t.jsxs("div",{children:[t.jsxs("div",{className:i.label,children:[h("current_backend"),t.jsx("p",{children:it(v)+n.baseURL})]}),t.jsx("div",{className:i.label,children:"Action"}),t.jsx(y,{start:t.jsx(Oe,{size:16}),label:h("switch_backend"),onClick:G})]}),t.jsxs("div",{className:i.item,children:[t.jsx(B,{id:"dark-mode-pure-black-toggle",checked:Z,onChange:ee}),t.jsx("label",{htmlFor:"dark-mode-pure-black-toggle",children:h("dark_mode_pure_black_toggle_label")})]})]})]})}export{mt as default};
